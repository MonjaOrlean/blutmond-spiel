<div class="karte-wrapper">

  <!-- Einstieg und Dropdown -->
  <div class="einstieg">
    <h2 style="color: darkred;">ğŸŒ Weltkarte von <em>Blutmond</em></h2>
    <p style="color: darkred;">Klicke auf ein Symbol, um mehr Ã¼ber eine Quest zu erfahren.</p>

    <label for="gebiet-auswahl" class="dropdown-label">Gebiet:&nbsp;</label>
    <select id="gebiet-auswahl" [(ngModel)]="gefiltertesGebiet">
      <option value="">ğŸŒ Alle Gebiete</option>
      <option *ngFor="let gebiet of gebiete" [value]="gebiet.name">
        {{ gebiet.symbol }} {{ gebiet.name }}
      </option>
    </select>
  </div>

  <!-- Weltkarte mit Questmarkern -->
  <div class="karte-container">
    <img src="assets/weltkarte.png" alt="Weltkarte" class="weltkartenbild" />

    <!-- Gebietsnamen (Positionen aus regionen.json) -->
    <div *ngFor="let region of regionen"
         class="gebietsname"
         [ngStyle]="{ left: region.x + '%', top: region.y + '%' }">
      {{ region.name }}
    </div>

    <!-- Marker fÃ¼r Quests -->
    <div *ngFor="let quest of gefilterteQuests()"
         class="marker"
         [ngStyle]="{ left: quest.x + '%', top: quest.y + '%' }"
         (click)="zeigeQuestDetails(quest)"
         [title]="quest.name">
      <ng-container [ngSwitch]="quest.status">
        <span *ngSwitchCase="'offen'">ğŸ”µ</span>
        <span *ngSwitchCase="'versteckt'">ğŸ”’</span>
        <span *ngSwitchCase="'aktiv'">ğŸŸ¢</span>
        <span *ngSwitchCase="'erledigt'">âœ…</span>
        <span *ngSwitchDefault>â”</span>
      </ng-container>
    </div>

    <!-- Infobox bei Klick auf Marker -->
    <div *ngIf="ausgewaehlteQuest"
         class="quest-info"
         [ngStyle]="{ left: (questPosX + 2) + '%', top: questPosY + '%' }">
      <h3>{{ ausgewaehlteQuest.name }}</h3>
      <p>ğŸ“ Ort: {{ ausgewaehlteQuest.ort || 'Unbekannt' }}</p>
      <p>ğŸ“œ Status: {{ ausgewaehlteQuest.status }}</p>
      <button (click)="schliesseDetails()">SchlieÃŸen</button>
    </div>
  </div>

  <!-- Legende -->
  <div class="legende">
    <div><span class="symbol">ğŸ”µ</span> Offen</div>
    <div><span class="symbol">ğŸ”’</span> Versteckt</div>
    <div><span class="symbol">ğŸŸ¢</span> Aktiv</div>
    <div><span class="symbol">âœ…</span> Erledigt</div>
  </div>

</div>
